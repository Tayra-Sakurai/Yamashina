<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="Yamashina.Views.PaymentMethods"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Yamashina.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:CommunityToolkit.WinUI.Controls"
    xmlns:viewmodels="using:Takatsuki.ViewModels"
    mc:Ignorable="d">

    <Grid Padding="12,16"
          RowSpacing="8"
          Background="{ThemeResource SolidBackgroundFillColorBaseBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <ListView ItemsSource="{x:Bind viewModel.ViewModels}"
                  x:Name="HyperListView">
            <ListView.Header>
                <controls:DataTable Margin="12,0,0,0">
                    <controls:DataColumn x:Uid="MtdCol" DesiredWidth="5*"/>
                    <controls:DataColumn x:Uid="BlncCol" DesiredWidth="*"/>
                </controls:DataTable>
            </ListView.Header>
            <ListView.ItemTemplate>
                <DataTemplate x:DataType="viewmodels:PaymentMethodItemViewModel">
                    <controls:DataRow>
                        <TextBlock Text="{x:Bind Name}"/>
                        <TextBlock Text="{x:Bind CurrentBalance}"/>
                    </controls:DataRow>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
        <CommandBar DefaultLabelPosition="Right"
                    Grid.Row="1" Background="{ThemeResource CardBackgroundFillColorSecondaryBrush}">
            <AppBarButton Icon="Add" Command="{x:Bind viewModel.AddCommand}"
                          x:Uid="Add"/>
            <AppBarButton Icon="Delete" x:Uid="Del"
                          Command="{x:Bind viewModel.RemoveCommand}"
                          CommandParameter="{Binding SelectedItem, ElementName=HyperListView}"/>
            <AppBarButton Icon="Sync" x:Uid="Sync"
                          Command="{x:Bind viewModel.LoadCommand}"/>
            <AppBarButton Icon="Page" x:Uid="Dtl" x:Name="DetailPager"/>
        </CommandBar>
    </Grid>
</Page>
